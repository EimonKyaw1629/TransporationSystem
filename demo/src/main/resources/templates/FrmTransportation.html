<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/layout}">
<head>
<meta charset="UTF-8">

<title>Insert Transportation</title>
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){
	$('#btnClear').click(function(){				
		/*Clear all input type="text" box*/
		$('#sampleForm input[type="text"]').val('');
		$('#sampleForm input[type="date"]').val('');		
	});
});

$(function () {
	        $("#checkBoxId").click(function () {
	            if ($(this).is(":checked")) {
	                $("#cost").removeAttr("readonly");
	                $("#cost").focus();
	            } else {
	                $("#cost").attr("readonly", "readonly");
	            }
	        });
	    });
	
function check()
{
    if (document.getElementById('cost').value=="0円"
     || document.getElementById('cost').value==undefined)
    {
       
        $("p").parent().after("<br/><div class='validation' style='color:red;margin-bottom: 20px;'>出発駅や到着駅を入れて、交通費検索ボタンを押下ください</div>");
        return false;
    }
    return true;
}

$(function(){
	var DS = $('#DepartureStation');
	var AS = $('#ArrivalStation');
	text.focus(function(){		  
	    text.val('start');
	});
	text.blur(function(){
	    $.ajax({
	        type:"POST",
	        url:"/multi",
	        data:"DepartureStation=" + $('#DepartureStation').val()
	        dataType : "text",
	        contentType: "application/json",
	        scriptCharset: 'utf-8',
	        success: function(otdata, dataType){
	            alert("OK");
	        },
	        error: function(xhr, status, error) {
	            alert(error);
	        }  
	    });
	  });
	});
</script>

</head>
<body>
<div layout:fragment="content">
	<div class="form-horizontal">
		<div class="container">
			<div class="col-md-12 col-md-offset-0">
				<h2 align="center">交通費管理</h2>

				<form id="sampleForm" action="/insert" method="post" th:object="${finfo}">
					<table style="margin-left: auto; margin-right: auto; table-layout: fixed;" >
					<tr height = 50px></tr>
						<tr >
							<td bgcolor="#C4FDFF" width="90"><label class="col-sm-12 control-label">担当者</label></td>
							<td width=200px>

							<select  id="infolist" class="form-control" name="PersonID" th:value="${finfo.PersonID}">
							<option 
							      th:each="duty : ${dutyPersonInfo}"
							      th:value="${duty.PersonID}"
							      th:text="${duty.PersonName}"
							      th:selected="${duty.PersonID == finfo.PersonID}" >
							      
							</option>
							</select>	
							</td>
							
							<td width=150px></td>
							<td bgcolor="#C4FDFF" width="90"><label class="col-sm-12 control-label">利用日</label></td>
							<td width=200px><input type="date" class="form-control" placeholder="UseDate" name="UseDate" th:value="${finfo.UseDate}"></td>
						</tr><tr height = 50px></tr>
						
						<tr>
							<td bgcolor="#C4FDFF"><label class="col-sm-12 control-label">出発駅</label></td>
							<td><input type="text" class="form-control" placeholder="駅" id="DepartureStation" name="DepartureStation" th:value="${finfo.DepartureStation}" required></td>
							<td></td>
							<td bgcolor="#C4FDFF"><label class="col-sm-12 control-label">到着駅</label></td>
							<td><input type="text" class="form-control" placeholder="駅" id="ArrivalStation" name="ArrivalStation" th:value="${finfo.ArrivalStation}" required></td>
						</tr><tr height = 50px></tr>
						<tr>
							<td bgcolor="#C4FDFF"><label class="col-sm-12 control-label">金額</label></td>
							<td><input type="text" id="cost" class="form-control" name="Fare" placeholder="cost" th:value="${finfo.Fare}+円" readonly required></td>
							
							<td>
							<button type="submit" class="btn btn-default" value="search" name="search" >金額表示</button>&nbsp
							<input type="checkbox" class="center" id="checkBoxId">
							</td>
							<td bgcolor="#C4FDFF"><label class="col-sm-12 control-label">移動目的</label></td>
							<td><input type="text" class="form-control" placeholder="Purpose" name="Purpose" th:value="${finfo.Purpose}"></td>
						</tr>
						<tr>
						<td ><p/></td>
						</tr>
					</table>
					
					<table style="margin-left: auto; margin-right: auto;">
						<tr>
							<td><input style="text-align:center; width:65px; height:35px;" type="button" class="btn btn-primary"  value="戻る"
									onclick="location.href='/TransportationList'"></td>
							<td width=5px></td>
							<td><input style="text-align:center; width:65px; height:35px;" type="button" id="btnClear" class="btn btn-primary" value="クリア"/></td>
							<td width=5px></td>
							<td><input style="text-align:center; width:65px; height:35px;" type="submit" id="btncreate" class="btn btn-primary" name="create" value="追加"  onclick=" return check();"/></td>
						</tr>
					</table>
				</form>
			</div>
		</div>
	</div>
</div>
</body>
</html>